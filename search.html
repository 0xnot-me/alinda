<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Search - Linda Olsson</title>
    <link rel="icon" href="http://www.lindaolsson.com/flogo.svg">
    <!-- Google Fonts - Instrument Serif -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:wght@400&display=swap" rel="stylesheet">
    
    <!-- Include IDX required stylesheets -->
    <link rel="stylesheet" type="text/css" href="https://mlspalmbeach.lindaolsson.com/graphical/frontend/css/idxstyles.php?t=574%7C142%7C487%7C266%7C575%7C5%7C518&a=13051&w=s&c%5Bs%5D=64" />
    <link rel="stylesheet" href="//d1qfrurkpai25r.cloudfront.net/graphical/css/jquery-ui-bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="//d1qfrurkpai25r.cloudfront.net/graphical/css/select2.css" type="text/css" />
    <link rel="stylesheet" href="//d1qfrurkpai25r.cloudfront.net/graphical/css/mobileFirst.css">
    
    <style>
        /* Basic resets */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f5f5f5; /* Light gray background for contrast with white box */
            padding-top: 7rem; /* Push down content for navbar */
        }
        
        /* Font variables */
        :root {
            --font-instrument: 'Instrument Serif', serif;
        }
        
        /* Apply Instrument Serif to headings */
        h1, h2, h3, .instrument-serif {
            font-family: var(--font-instrument);
            font-weight: 400;
        }
        
        /* NAVBAR STYLES - Adjusted for horizontal layout with logo top centered */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            width: 100%;
            padding: 0.5rem 0;
            background-color: #1b4e1f;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* Apply Instrument Serif to navbar elements */
        .nav-link, 
        .dropdown-link, 
        .mobile-link,
        .mobile-section-title {
            font-family: var(--font-instrument);
            font-weight: 400;
            letter-spacing: 0.02em;
        }
        
        /* Apply font to mobile menu section titles */
        .mobile-section-title {
            font-family: var(--font-instrument);
        }
        
        .logo-container {
            margin: 0.5rem 0;
            text-align: center;
        }
        
        .logo {
            height: 3.5rem;
        }
        
        .nav-menu {
            display: flex;
            width: 100%;
            justify-content: center;
            padding: 0.5rem 0;
        }
        
        .menu-items {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        
        .nav-item {
            position: relative;
        }
        
        .nav-link {
            color: white;
            text-decoration: none;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            transition: color 0.2s;
        }
        
        .nav-link:hover {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .dropdown-icon {
            display: inline-block;
            width: 0;
            height: 0;
            margin-left: 0.25rem;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid white;
            transition: transform 0.2s;
        }
        
        .nav-item:hover .dropdown-icon {
            transform: rotate(180deg);
        }
        
        .dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            width: 300px;
            background-color: #1b4e1f;
            border: 1px solid #184b1c;
            border-radius: 0.25rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s;
            z-index: 101;
        }
        
        .nav-item:hover .dropdown {
            opacity: 1;
            visibility: visible;
        }
        
        .dropdown-link {
            display: block;
            color: white;
            text-decoration: none;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            transition: background-color 0.2s;
        }
        
        .dropdown-link:hover {
            background-color: #184b1c;
        }
        
        /* Mobile menu button */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 0.5rem;
        }
        
        /* Mobile menu */
        .mobile-menu {
            display: none;
        }
        
        /* White box container for IDX content */
        .idx-container-wrapper {
            max-width: 900px; /* Reduced width */
            margin: 0 auto 40px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 25px 40px;
            overflow: hidden !important;
        }
        
        /* Add container for search form to ensure proper centering */
        #idx-form-container {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 auto;
            overflow: hidden !important;
        }
        
        /* Fix the Advanced Search specific layout issues */
        /* Target the Advanced search page specifically */
        .IDX-page-advanced #IDX-searchPageWrapper {
            width: auto !important;
            max-width: 100% !important;
            margin: 0 auto !important;
        }
        
        /* Fix navbar width */
        .IDX-page-advanced #IDX-navbar {
            width: auto !important;
            margin: 0 auto !important;
            max-width: 100% !important;
        }
        
        /* Fix action buttons specific width issue */
        .IDX-page-advanced #IDX-action-buttons {
            width: auto !important;
            max-width: 100% !important;
            margin: 20px auto !important;
            padding: 0 !important;
        }
        
        /* Fix the row content containers */
        .IDX-page-advanced .IDX-row-content {
            width: auto !important;
            margin: 0 auto !important;
            max-width: 100% !important;
        }
        
        /* Make sure inline styles can't override containment */
        .IDX-page-advanced [style*="width"] {
            max-width: 100% !important;
        }
        
        /* Custom styles for IDX elements */
        #IDX-main {
            font-family: Arial, sans-serif !important;
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 auto !important;
            padding: 0 !important;
            overflow: hidden !important;
        }
        
        /* REMOVE THE EXCESSIVE CONSTRAINTS THAT CAUSED SINGLE COLUMN LAYOUT */
        /* Instead use a targeted approach to preserve layout while constraining width */
        
        /* Preserve the row layout */
        .IDX-row-content {
            display: flex !important;
            flex-wrap: wrap !important;
            justify-content: space-between !important;
            width: 100% !important;
            max-width: 100% !important;
        }
        
        /* Style control groups to allow them to sit side by side */
        .IDX-control-group {
            margin-bottom: 15px !important;
            flex: 0 0 48% !important; /* Almost half width to allow two columns */
            min-width: 200px !important;
        }
        
        /* Ensure the form inputs and selects don't break layout */
        .IDX-control-group input,
        .IDX-control-group select {
            width: 100% !important;
            max-width: 100% !important;
            box-sizing: border-box !important;
        }
        
        /* Fix form root elements to ensure contained display */
        #IDX-searchForm,
        #IDX-advancedSearchFields,
        #IDX-search-property-content,
        #IDX-search-primary-content,
        #IDX-search-additional-content {
            width: 100% !important;
            max-width: 100% !important;
            padding: 0 !important;
            margin: 0 auto !important;
        }
        
        /* Fix any multi-select fields that might be getting too narrow */
        #IDX-ccz-select, 
        #IDX-pt, 
        #IDX-propStatus,
        #IDX-propSubType,
        #IDX-searchRefinement {
            width: 100% !important;
        }
        
        /* Center align button container */
        #IDX-action-buttons,
        .IDX-action-buttons {
            text-align: center !important;
            width: 100% !important;
            margin: 20px 0 !important;
            flex: 0 0 100% !important; /* Full width */
        }
        
        /* Style search option buttons with brand colors */
        #IDX-saveSearch,
        .IDX-saveSearch,
        .IDX-newSearch,
        .IDX-modifySearch,
        .IDX-btn--map-toggle,
        a.IDX-resultsAction,
        .IDX-topAction a,
        .IDX-btn-primary {
            display: inline-block !important;
            background-color: #1b4e1f !important;
            color: white !important;
            padding: 8px 16px !important;
            border-radius: 4px !important;
            text-decoration: none !important;
            font-weight: bold !important;
            text-transform: uppercase !important;
            font-size: 14px !important;
            letter-spacing: 0.5px !important;
            transition: background-color 0.2s ease !important;
            border: none !important;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;
        }
        
        #IDX-saveSearch:hover,
        .IDX-saveSearch:hover,
        .IDX-newSearch:hover,
        .IDX-modifySearch:hover,
        .IDX-btn--map-toggle:hover,
        a.IDX-resultsAction:hover,
        .IDX-topAction a:hover,
        .IDX-btn-primary:hover {
            background-color: #184b1c !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15) !important;
        }
        
        /* Footer */
        .footer {
            background-color: #1b4e1f;
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 20px;
        }
        
        .footer p {
            margin: 5px 0;
        }
        
        /* Make the form elements responsive */
        @media (max-width: 992px) {
            .menu-items {
                gap: 1rem;
            }
            
            .nav-link {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
                position: absolute;
                top: 1rem;
                right: 1rem;
            }
            
            .nav-menu {
                display: none;
            }
            
            .mobile-menu.open {
                display: block;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #1b4e1f;
                z-index: 200;
                padding: 4rem 1rem 1rem;
                overflow-y: auto;
            }
            
            .mobile-menu-close {
                position: absolute;
                top: 1rem;
                right: 1rem;
                background: none;
                border: none;
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }
            
            .mobile-menu-sections {
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .mobile-section {
                border-bottom: 1px solid #184b1c;
                padding-bottom: 1rem;
            }
            
            .mobile-section-title {
                color: white;
                font-size: 1.25rem;
                margin-bottom: 0.5rem;
            }
            
            .mobile-links {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
                padding-left: 1rem;
            }
            
            .mobile-link {
                color: white;
                text-decoration: none;
                font-size: 1rem;
                padding: 0.5rem 0;
            }
            
            .IDX-navbar-nav {
                flex-direction: column;
            }
            
            .IDX-navbar-nav li {
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
        
        /* CRITICAL: Explicit show rules for IDX elements that need to be visible */
        #IDX-searchPageWrapper,
        #IDX-navbar,
        #IDX-navbar-collapse, 
        #IDX-searchForm,
        #IDX-coreSearchFields,
        #IDX-search-property-content,
        #IDX-search-primary-content,
        #IDX-search-additional-content,
        #IDX-action-buttons,
        #IDX-advancedSearchFields {
            display: block !important;
            visibility: visible !important;
            height: auto !important;
            overflow: visible !important;
            opacity: 1 !important;
        }
        
        /* Hide elements that shouldn't be visible */
        #IDX-Subheader, 
        #IDX-Subheader-Page,
        iframe[src*="youtube.com"],
        #IDX-pageSettings, 
        #IDX-cczListRules, 
        #IDX-mlsList,
        #IDX-defaultPriceData,
        #IDX-modifySearchData,
        [id^="queryArray"],
        [class^="queryArray"],
        pre, code {
            display: none !important;
            visibility: hidden !important;
            height: 0 !important;
            width: 0 !important;
            opacity: 0 !important;
            padding: 0 !important;
            margin: 0 !important;
            overflow: hidden !important;
        }
    </style>
    
    <!-- Load required IDX scripts -->
    <script src="//d1qfrurkpai25r.cloudfront.net/graphical/javascript/jquery-1.7.min.js"></script>
    <script src="//d1qfrurkpai25r.cloudfront.net/graphical/javascript/jquery.ui.min.js"></script>
    <script src="//d1qfrurkpai25r.cloudfront.net/graphical/javascript/jquery.frontend.form.min.js"></script>
    <script src="//d1qfrurkpai25r.cloudfront.net/graphical/javascript/numeral.js"></script>
    <script type="text/javascript">
        var idx = jQuery.noConflict();
    </script>
    <script src="//d1qfrurkpai25r.cloudfront.net/graphical/javascript/bootstrap3-idx.js"></script>
    <script src="//d1qfrurkpai25r.cloudfront.net/graphical/javascript/mobileFirst.js"></script>
    <script src="//d1qfrurkpai25r.cloudfront.net/graphical/javascript/jquery.select2.min.js"></script>
    
    <!-- Prevent auto-submission before page loads -->
    <script>
        // Immediately block form submissions
        (function() {
            // Override the native form submit method
            if (typeof HTMLFormElement !== 'undefined') {
                var originalSubmit = HTMLFormElement.prototype.submit;
                HTMLFormElement.prototype.submit = function() {
                    // Only allow submissions that are user-initiated
                    if (window.userInitiatedSubmit === true) {
                        console.log("Form submission allowed - user initiated");
                        originalSubmit.apply(this, arguments);
                    } else {
                        console.log("Blocked automatic form submission");
                        if (event) event.preventDefault();
                        return false;
                    }
                };
            }
            
            // Capture all submit events globally
            document.addEventListener('submit', function(e) {
                // Check if this is a search form
                if (e.target && (e.target.id === 'IDX-searchForm' || e.target.classList.contains('IDX-searchForm'))) {
                    // If not user initiated, block it
                    if (window.userInitiatedSubmit !== true) {
                        console.log("Prevented auto-submission via event listener");
                        e.preventDefault();
                        e.stopPropagation();
                        return false;
                    }
                }
            }, true);
            
            // Override XMLHttpRequest to detect AJAX form submissions
            var originalXHROpen = window.XMLHttpRequest.prototype.open;
            window.XMLHttpRequest.prototype.open = function() {
                // For any requests to results URLs, check if it's user initiated
                if (arguments[1] && (
                    arguments[1].includes('/idx/results/') || 
                    arguments[1].includes('idxID=') || 
                    arguments[1].includes('pt=')
                )) {
                    if (window.userInitiatedSubmit !== true) {
                        console.log("Blocked XMLHttpRequest to results URL:", arguments[1]);
                        // Replace with a no-op function
                        this.send = function() {};
                        return;
                    }
                }
                originalXHROpen.apply(this, arguments);
            };
            
            // Override History API methods to prevent automatic redirects
            if (window.history && window.history.pushState) {
                var originalPushState = window.history.pushState;
                window.history.pushState = function() {
                    // If URL contains 'results' and not user initiated, block it
                    if (arguments[2] && 
                        (arguments[2].includes('/idx/results/') || arguments[2].includes('idxID=')) && 
                        window.userInitiatedSubmit !== true) {
                        console.log("Blocked history push to results page:", arguments[2]);
                        return;
                    }
                    originalPushState.apply(window.history, arguments);
                };
            }
            
            console.log("Immediate search form protection initialized");
        })();
    </script>
</head>
<body>
    <!-- New Navbar from t.html -->
    <nav class="navbar">
        <!-- Logo -->
        <div class="logo-container">
            <a href="http://www.lindaolsson.com/">
                <img src="http://www.lindaolsson.com/flogo.svg" alt="Linda R. Olsson Inc., Realtor" class="logo">
            </a>
        </div>
        
        <!-- Desktop Menu -->
        <div class="nav-menu">
            <ul class="menu-items">
                <li class="nav-item">
                    <a href="http://www.lindaolsson.com/about-us" class="nav-link">
                        About <span class="dropdown-icon"></span>
                    </a>
                    <div class="dropdown">
                        <a href="http://www.lindaolsson.com/about-us" class="dropdown-link">ABOUT LINDA</a>
                        <a href="http://www.lindaolsson.com/our-team" class="dropdown-link">OUR TEAM</a>
                        <a href="http://www.lindaolsson.com/a-leader-in-palm-beach-real-estate" class="dropdown-link">A LEADER IN PALM BEACH REAL ESTATE</a>
                        <a href="http://www.lindaolsson.com/concierge-quality-realty-services" class="dropdown-link">CONCIERGE QUALITY REALTY SERVICES</a>
                        <a href="http://www.lindaolsson.com/community-involvement" class="dropdown-link">GIVING BACK...COMMUNITY INVOLVEMENT</a>
                        <a href="http://www.lindaolsson.com/palm-beach-florida-real-estate-news" class="dropdown-link">IN THE NEWS</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="http://www.lindaolsson.com/search" class="nav-link">
                        Search For Homes <span class="dropdown-icon"></span>
                    </a>
                    <div class="dropdown">
                        <a href="http://www.lindaolsson.com/north-end-palm-beach-real-estate" class="dropdown-link">NORTH END HOMES</a>
                        <a href="http://www.lindaolsson.com/in-town-palm-beach-real-estate" class="dropdown-link">IN TOWN HOMES</a>
                        <a href="http://www.lindaolsson.com/estate-section" class="dropdown-link">ESTATE SECTION HOMES</a>
                        <a href="http://www.lindaolsson.com/in-town-townhomes" class="dropdown-link">IN-TOWN TOWNHOMES</a>
                        <a href="http://www.lindaolsson.com/in-town-condos" class="dropdown-link">IN-TOWN CONDOS</a>
                        <a href="http://www.lindaolsson.com/sloans-curve-south-to-manalapan" class="dropdown-link">SLOANS CURVE SOUTH TO MANALAPAN CONDOMINIUMS</a>
                        <a href="http://www.lindaolsson.com/luxury-palm-beach-condominium-co-op-buildings" class="dropdown-link">LUXURY PALM BEACH CONDOMINIUM AND CO-OP BUILDINGS</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="http://www.lindaolsson.com/blog" class="nav-link">Blog</a>
                </li>
                <li class="nav-item">
                    <a href="http://www.lindaolsson.com/tax-benefits" class="nav-link">
                        Tax Benefits <span class="dropdown-icon"></span>
                    </a>
                    <div class="dropdown">
                        <a href="http://www.lindaolsson.com/global-reach-local-expertise" class="dropdown-link">GLOBAL REACH/LOCAL EXPERTISE</a>
                        <a href="http://www.lindaolsson.com/palm-beach-a-slice-of-paradise" class="dropdown-link">PALM BEACH – A SLICE OF PARADISE</a>
                        <a href="http://www.lindaolsson.com/buying-selling-hire-professional" class="dropdown-link">BUYING OR SELLING? HIRE A PROFESSIONAL!</a>
                        <a href="http://www.lindaolsson.com/4-essential-things-to-consider-when-buying-a-condo" class="dropdown-link">4 ESSENTIAL THINGS TO CONSIDER WHEN BUYING A CONDO</a>
                        <a href="http://www.lindaolsson.com/sellers-tips" class="dropdown-link">SELLERS TIPS</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="http://www.lindaolsson.com/market-reports" class="nav-link">Market Reports</a>
                </li>
                <li class="nav-item">
                    <a href="http://www.lindaolsson.com/testimonials" class="nav-link">Testimonials</a>
                </li>
                <li class="nav-item">
                    <a href="http://www.lindaolsson.com/contact" class="nav-link">Contact</a>
                </li>
            </ul>
        </div>
        
        <!-- Mobile Menu Button -->
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
        </button>
    </nav>
    
    <!-- Mobile Menu -->
    <div id="mobile-menu" class="mobile-menu">
        <button class="mobile-menu-close" onclick="toggleMobileMenu()">✕</button>
        
        <div class="mobile-menu-sections">
            <!-- About Section -->
            <div class="mobile-section">
                <div class="mobile-section-title">About</div>
                <div class="mobile-links">
                    <a href="http://www.lindaolsson.com/about-us" class="mobile-link">ABOUT LINDA</a>
                    <a href="http://www.lindaolsson.com/our-team" class="mobile-link">OUR TEAM</a>
                    <a href="http://www.lindaolsson.com/a-leader-in-palm-beach-real-estate" class="mobile-link">A LEADER IN PALM BEACH REAL ESTATE</a>
                    <a href="http://www.lindaolsson.com/concierge-quality-realty-services" class="mobile-link">CONCIERGE QUALITY REALTY SERVICES</a>
                    <a href="http://www.lindaolsson.com/community-involvement" class="mobile-link">GIVING BACK...COMMUNITY INVOLVEMENT</a>
                    <a href="http://www.lindaolsson.com/palm-beach-florida-real-estate-news" class="mobile-link">IN THE NEWS</a>
                </div>
            </div>
            
            <!-- Search For Homes Section -->
            <div class="mobile-section">
                <div class="mobile-section-title">Search For Homes</div>
                <div class="mobile-links">
                    <a href="http://www.lindaolsson.com/north-end-palm-beach-real-estate" class="mobile-link">NORTH END HOMES</a>
                    <a href="http://www.lindaolsson.com/in-town-palm-beach-real-estate" class="mobile-link">IN TOWN HOMES</a>
                    <a href="http://www.lindaolsson.com/estate-section" class="mobile-link">ESTATE SECTION HOMES</a>
                    <a href="http://www.lindaolsson.com/in-town-townhomes" class="mobile-link">IN-TOWN TOWNHOMES</a>
                    <a href="http://www.lindaolsson.com/in-town-condos" class="mobile-link">IN-TOWN CONDOS</a>
                    <a href="http://www.lindaolsson.com/sloans-curve-south-to-manalapan" class="mobile-link">SLOANS CURVE SOUTH TO MANALAPAN CONDOMINIUMS</a>
                    <a href="http://www.lindaolsson.com/luxury-palm-beach-condominium-co-op-buildings" class="mobile-link">LUXURY PALM BEACH CONDOMINIUM AND CO-OP BUILDINGS</a>
                </div>
            </div>
            
            <!-- Tax Benefits Section -->
            <div class="mobile-section">
                <div class="mobile-section-title">Tax Benefits</div>
                <div class="mobile-links">
                    <a href="http://www.lindaolsson.com/global-reach-local-expertise" class="mobile-link">GLOBAL REACH/LOCAL EXPERTISE</a>
                    <a href="http://www.lindaolsson.com/palm-beach-a-slice-of-paradise" class="mobile-link">PALM BEACH – A SLICE OF PARADISE</a>
                    <a href="http://www.lindaolsson.com/buying-selling-hire-professional" class="mobile-link">BUYING OR SELLING? HIRE A PROFESSIONAL!</a>
                    <a href="http://www.lindaolsson.com/4-essential-things-to-consider-when-buying-a-condo" class="mobile-link">4 ESSENTIAL THINGS TO CONSIDER WHEN BUYING A CONDO</a>
                    <a href="http://www.lindaolsson.com/sellers-tips" class="mobile-link">SELLERS TIPS</a>
                </div>
            </div>
            
            <!-- Other Links -->
            <div class="mobile-section">
                <a href="http://www.lindaolsson.com/blog" class="mobile-link">Blog</a>
                <a href="http://www.lindaolsson.com/market-reports" class="mobile-link">Market Reports</a>
                <a href="http://www.lindaolsson.com/testimonials" class="mobile-link">Testimonials</a>
                <a href="http://www.lindaolsson.com/contact" class="mobile-link">Contact</a>
            </div>
        </div>
    </div>

    <!-- Main content in a centered wrapper -->
    <div class="idx-container-wrapper">
        <div id="idx-form-container">
            <!-- This is where the IDX search form will load -->
            <div id="IDX-main">
                <div id="IDX-searchPageWrapper">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu.classList.contains('open')) {
                mobileMenu.classList.remove('open');
                document.body.style.overflow = '';
            } else {
                mobileMenu.classList.add('open');
                document.body.style.overflow = 'hidden';
            }
        }
        
        // Main script to fix search form behavior
        document.addEventListener('DOMContentLoaded', function() {
            // Set base URL with HTTPS
            const idxBaseURL = 'https://mlspalmbeach.lindaolsson.com';
            
            // Function to hide JSON data elements and video
            function hideConfigData() {
                // Hide JSON configuration data elements
                const configElements = [
                    '#IDX-pageSettings',
                    '#IDX-cczListRules',
                    '#IDX-mlsList',
                    '#IDX-defaultPriceData',
                    '#IDX-modifySearchData',
                    '#IDX-Subheader',
                    '#IDX-Subheader-Page'
                ];
                
                configElements.forEach(selector => {
                    const element = document.querySelector(selector);
                    if (element) {
                        element.style.display = 'none';
                        element.style.visibility = 'hidden';
                        element.style.height = '0';
                    }
                });
                
                // Hide any videos
                document.querySelectorAll('iframe[src*="youtube.com"]').forEach(iframe => {
                    iframe.style.display = 'none';
                    iframe.style.visibility = 'hidden';
                    iframe.style.height = '0';
                });
                
                // Hide raw JSON data that might be displayed
                document.querySelectorAll('pre, [id^="queryArray"], [class^="queryArray"]').forEach(el => {
                    el.style.display = 'none';
                    el.style.visibility = 'hidden';
                });
            }
            
            // Function to fix IDX search form behavior
            function fixIDXSearchForm() {
                console.log("Fixing IDX search form...");
                
                // Hide JSON configuration data and video
                hideConfigData();
                
                // Show search form wrapper
                const searchWrapper = document.getElementById('IDX-searchPageWrapper');
                if (searchWrapper) {
                    searchWrapper.style.display = 'block';
                    searchWrapper.style.visibility = 'visible';
                }
                
                // Show search form
                const searchForm = document.getElementById('IDX-searchForm');
                if (searchForm) {
                    searchForm.style.display = 'block';
                    searchForm.style.visibility = 'visible';
                    
                    // Ensure form action uses HTTPS
                    if (searchForm.action && searchForm.action.includes('http://')) {
                        searchForm.action = searchForm.action.replace('http://', 'https://');
                    }
                    
                    // Prevent auto-selection of property type which triggers auto-submission
                    const propertyTypeSelect = document.getElementById('IDX-pt');
                    if (propertyTypeSelect) {
                        // Clear the pre-selected value
                        const options = propertyTypeSelect.querySelectorAll('option');
                        options.forEach(option => {
                            option.selected = false;
                            if (option.hasAttribute('selected')) {
                                option.removeAttribute('selected');
                            }
                        });
                        
                        // Force empty value
                        propertyTypeSelect.value = '';
                    }
                    
                    // Set up form submission handling
                    // Add event listener to submit buttons
                    const submitButtons = document.querySelectorAll('#IDX-formSubmit, #IDX-formSubmit-bottom');
                    submitButtons.forEach(button => {
                        button.addEventListener('click', function(e) {
                            console.log("Submit button clicked - marking as user initiated");
                            window.userInitiatedSubmit = true;
                        });
                    });
                    
                    // Override the form's submit event
                    searchForm.addEventListener('submit', function(e) {
                        if (window.userInitiatedSubmit !== true) {
                            console.log("Blocked form submission - not user initiated");
                            e.preventDefault();
                            e.stopPropagation();
                            return false;
                        } else {
                            console.log("Allowing form submission - user initiated");
                            
                            // Ensure action is HTTPS
                            if (this.action && this.action.includes('http://')) {
                                this.action = this.action.replace('http://', 'https://');
                            }
                        }
                    });
                }
                
                // Fix all links to use HTTPS
                document.querySelectorAll('a[href^="http://mlspalmbeach"]').forEach(link => {
                    link.href = link.href.replace('http://', 'https://');
                });
            }
            
            // Direct approach to getting the search form via AJAX
            function loadSearchViaAjax() {
                console.log("Loading search form via AJAX...");
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function() {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            console.log("Successfully loaded search form");
                            // Extract the search form from the response
                            var parser = new DOMParser();
                            var doc = parser.parseFromString(xhr.responseText, 'text/html');
                            
                            // Get the main IDX content
                            var idxMain = doc.getElementById('IDX-main');
                            if (idxMain) {
                                console.log("Found IDX-main content, updating container");
                                // Replace our container with the IDX content
                                document.getElementById('IDX-main').innerHTML = idxMain.innerHTML;
                                
                                // Hide configuration data and fix the form
                                setTimeout(function() {
                                    hideConfigData();
                                    fixIDXSearchForm();
                                    // Add a fallback if search form doesn't appear
                                    if (!document.querySelector('#IDX-searchForm') || 
                                        document.querySelector('#IDX-searchForm').offsetHeight === 0) {
                                        console.log("Search form not visible, adding iframe fallback");
                                        addIFrameFallback();
                                    }
                                }, 100);
                            } else {
                                console.error("Could not find IDX-main in loaded content");
                                addIFrameFallback();
                            }
                        } else {
                            console.error("Failed to load search form: " + xhr.status);
                            addIFrameFallback();
                        }
                    }
                };
                xhr.open('GET', idxBaseURL + '/idx/search/advanced', true);
                xhr.send();
            }
            
            // Fallback method if AJAX fails - embed the IDX search as an iframe
            function addIFrameFallback() {
                console.log("Adding iframe fallback for search form");
                const container = document.getElementById('idx-form-container');
                if (container) {
                    container.innerHTML = '<iframe src="https://mlspalmbeach.lindaolsson.com/idx/search/advanced" style="width:100%; height:800px; border:none; overflow:hidden;"></iframe>';
                }
            }
            
            // Load the search form content
            loadSearchViaAjax();
            
            // Set up observer to watch for changes and fix issues
            const targetNode = document.getElementById('IDX-main');
            if (targetNode) {
                const observer = new MutationObserver(function(mutations) {
                    hideConfigData();
                    fixIDXSearchForm();
                });
                
                observer.observe(targetNode, { childList: true, subtree: true });
            }
        });
        
        // Handle when page fully loads
        window.onload = function() {
            // Hide JSON data and video
            const configElements = [
                '#IDX-pageSettings',
                '#IDX-cczListRules',
                '#IDX-mlsList',
                '#IDX-defaultPriceData',
                '#IDX-modifySearchData',
                '#IDX-Subheader',
                '#IDX-Subheader-Page'
            ];
            
            configElements.forEach(selector => {
                const element = document.querySelector(selector);
                if (element) {
                    element.style.display = 'none';
                    element.style.visibility = 'hidden';
                    element.style.height = '0';
                }
            });
            
            // Hide any videos
            document.querySelectorAll('iframe[src*="youtube.com"]').forEach(iframe => {
                iframe.style.display = 'none';
                iframe.style.visibility = 'hidden';
                iframe.style.height = '0';
            });
            
            // Clear property type selection
            const pt = document.getElementById('IDX-pt');
            if (pt) {
                pt.value = '';
                const selectedOption = pt.querySelector('option[selected]');
                if (selectedOption) {
                    selectedOption.removeAttribute('selected');
                }
            }
            
            // Hide raw JSON data
            document.querySelectorAll('pre, [id^="queryArray"], [class^="queryArray"]').forEach(el => {
                el.style.display = 'none';
                el.style.visibility = 'hidden';
            });
        };
    </script>
</body>
</html>
